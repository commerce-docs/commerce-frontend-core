"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[5097],{19057:function(e,t,o){o.r(t),o.d(t,{_frontmatter:function(){return d},default:function(){return g}});var a=o(58168),n=o(80045),i=(o(88763),o(15680)),r=o(83407);const m=["components"],d={},l=(s="InlineAlert",function(e){return console.warn("Component "+s+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)});var s;const p={_frontmatter:d},u=r.A;function g(e){let{components:t}=e,o=(0,n.A)(e,m);return(0,i.mdx)(u,(0,a.A)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"install-the-migration-module"},"Install the migration module"),(0,i.mdx)("p",null,"The migration module is a composer package hosted within our repository. This package is only available for those with Commerce access keys."),(0,i.mdx)(l,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"We recommend using the module in a development environment before deploying it to the production environment. We also recommend creating sufficient backups before completing any form of content migration."),(0,i.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.mdx)("p",null,"Before installing the migration module, you need to prepare the environment you intend to migrate:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Make a backup of your current database."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Remove BlueFoot from your current Adobe Commerce instance: ",(0,i.mdx)("inlineCode",{parentName:"p"},"composer remove gene/bluefoot"),"."),(0,i.mdx)("p",{parentName:"li"},"BlueFoot does not contain uninstall scripts, but we do preserve your data on uninstall.")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Upgrade to Commerce 2.3.1 (which includes Page Builder)."),(0,i.mdx)("p",{parentName:"li"},"Please see our ",(0,i.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.3/comp-mgr/cli/cli-upgrade.html"},"Command-line upgrade")," instructions on how to complete this.\nPage Builder itself does not convert any of your content. We preserve your existing BlueFoot content when we install Page Builder."))),(0,i.mdx)("h2",{id:"composer-installation"},"Composer installation"),(0,i.mdx)("p",null,"To install the migration module:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Navigate to the root directory of your Commerce 2.3.1 installation.")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Use the following composer command:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"composer require magento/module-page-builder-data-migration\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("a",{parentName:"p",href:"#disable-migration-on-deployment"},"Disable the default migration-on-deployment feature"),"."),(0,i.mdx)(l,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",{parentName:"li"},"This step is critical for migration development work. It disables the default migration module behavior that migrates your content as part of the deployment using ",(0,i.mdx)("inlineCode",{parentName:"p"},"setup:upgrade"),". We made this the default behavior so that deployment to production is easy. But during development, you need to turn it off so that you do not run your migrations accidentally, before you have made strategic changes to your migration code, or backups to your database."))),(0,i.mdx)("p",null,"After completing these steps, the data migration source code can be found within the ",(0,i.mdx)("inlineCode",{parentName:"p"},"vendor/magento")," directory with the other Commerce modules."),(0,i.mdx)("h2",{id:"github-installation"},"GitHub installation"),(0,i.mdx)(l,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"This installation option is for those who are part of the Commerce organization on GitHub and want easier access to the migration source code during migration development work."),(0,i.mdx)("p",null,"To install the migration module from the GitHub repo, you will need access to the private repo: ",(0,i.mdx)("inlineCode",{parentName:"p"},"magento/magento2-page-builder-data-migration"),":"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Navigate into the directory above your Magento 2 installation.")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Clone the ",(0,i.mdx)("inlineCode",{parentName:"p"},"magento/magento2-page-builder-data-migration")," repository using the following command:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:magento/magento2-page-builder-data-migration.git\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Symlink the ",(0,i.mdx)("inlineCode",{parentName:"p"},"magento2-page-builder-data-migration")," into your Commerce installation:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"php <magento-root-directory>/dev/tools/build-ee.php --command=link --ce-source <magento-root-directory> --ee-source magento2-page-builder-data-migration\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("a",{parentName:"p",href:"#disable-migration-on-deployment"},"Disable the default migration-on-deployment feature"),"."),(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("strong",{parentName:"p"},"Note"),": This step is critical for migration development work. It disables the default migration module behavior that migrates your content as part of the deployment using ",(0,i.mdx)("inlineCode",{parentName:"p"},"setup:upgrade"),". We made this the default behavior so that deployment to production is easy. But during development, you need to turn it off so that you do not run your migrations accidentally, before you have made strategic changes to your migration code, or backups to your database."))),(0,i.mdx)("p",null,"After completing these steps, the data migration source code should sit alongside the root directory of Commerce 2.3.1 installation, with the symlinks placed within. If your directory structure differs, adjust your symlink paths as needed."),(0,i.mdx)("h2",{id:"disable-migration-on-deployment"},"Disable migration on deployment"),(0,i.mdx)("p",null,"This step disables the migration module feature that migrates your content as part of the deployment using ",(0,i.mdx)("inlineCode",{parentName:"p"},"setup:upgrade"),". During development, you often need to customize your migration code ",(0,i.mdx)("em",{parentName:"p"},"before")," running migrations to ensure that your content migrates to Page Builder as intended. So it is best to turn off this auto-migration feature and use the explicit migration command as described in ",(0,i.mdx)("a",{parentName:"p",href:"run-migration-module.md"},"running the migration module"),"."),(0,i.mdx)("p",null,"To disable migration on deployment, run the following queries on the ",(0,i.mdx)("inlineCode",{parentName:"p"},"setup_module")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"patch_list")," tables in your database. These query values indicate that the migration module has already been installed, which prevents Commerce from applying the patch and auto-running the migration before you are ready."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO `setup_module` (`module`, `schema_version`, `data_version`)\nVALUES\n    ('Magento_PageBuilderDataMigration', '1.0.0', '1.0.0');\n\nINSERT INTO `patch_list` (`patch_name`)\nVALUES\n    ('Magento\\\\PageBuilderDataMigration\\\\Setup\\\\Patch\\\\Data\\\\MigrateToPageBuilder');\n")),(0,i.mdx)("h2",{id:"modifying-migration-source-code"},"Modifying migration source code"),(0,i.mdx)("p",null,"We do not plan on releasing any updates of the ",(0,i.mdx)("inlineCode",{parentName:"p"},"PageBuilderDataMigration")," module. This means you can modify the migration source code as needed to suite your needs."),(0,i.mdx)("h2",{id:"next-steps"},"Next Steps"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"run-migration-module.md"},"Run the migration module"),"."))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-page-builder-migration-install-migration-module-md-59918c3b83fd36a24b99.js.map