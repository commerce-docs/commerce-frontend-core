{"version":3,"file":"component---src-pages-ui-components-concepts-configuration-flow-md-2d9d8b0490ecdcbac063.js","mappings":"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","sources":["webpack://commerce-frontend-core/./src/pages/ui-components/concepts/configuration-flow.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-frontend-core/commerce-frontend-core/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"configuration-flow\"\n    }}>{`Configuration flow`}</h1>\n    <p>{`The following section covers the configuration flow of UI components. Before a UI component is finally displayed on a web page, its configuration undergoes a series of modifications. Starting from the initial reading of the top-level component instance's XML declaration, all the way to the merging of module-specific options.`}</p>\n    <p>{`When the server generates a page response, the configuration of these components in the `}<a parentName=\"p\" {...{\n        \"href\": \"xml-declaration.md\"\n      }}><inlineCode parentName=\"a\">{`.xml`}</inlineCode>{` declaration files`}</a>{` is then modified by the `}<a parentName=\"p\" {...{\n        \"href\": \"modifier.md\"\n      }}><inlineCode parentName=\"a\">{`.php`}</inlineCode>{` modifiers`}</a>{`, and then finally this combined configuration is packed into JSON format and added into the HTTP response body.`}</p>\n    <p>{`On the client-side, this JSON is processed by `}<inlineCode parentName=\"p\">{`Magento_Ui/js/core/app`}</inlineCode>{` where `}<inlineCode parentName=\"p\">{`Magento_Ui/js/core/app`}</inlineCode>{` is an alias for the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Ui/view/base/web/js/core/app.js\"\n      }}><inlineCode parentName=\"a\">{`app.js`}</inlineCode></a>{` file. The JSON could be seen in the page source. The `}<inlineCode parentName=\"p\">{`Magento_Ui/js/core/app`}</inlineCode>{` creates the UI components instances according to the configuration of the JSON using `}<inlineCode parentName=\"p\">{`uiLayout`}</inlineCode>{`.`}</p>\n    <p>{`The JavaScript application bounds these instances to the corresponding `}<inlineCode parentName=\"p\">{`.html`}</inlineCode>{` templates, if there are any `}<inlineCode parentName=\"p\">{`.html`}</inlineCode>{` templates declared in JSON for that particular component. The top-level UI component is bound to the page by the `}<inlineCode parentName=\"p\">{`scope`}</inlineCode>{` Knockout binding.`}</p>\n    <h2 {...{\n      \"id\": \"implementation-details\"\n    }}>{`Implementation details`}</h2>\n    <p>{`This section provides more detailed steps about the configuration flow.`}</p>\n    <p>{`Lets consider an example with the top-level UI component, `}<inlineCode parentName=\"p\">{`form`}</inlineCode>{`.`}</p>\n    <p>{`Lets imagine we have the following file structure in our module `}<inlineCode parentName=\"p\">{`<My_Module>`}</inlineCode>{`:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`layout `}<inlineCode parentName=\"li\">{`.xml`}</inlineCode>{` file of the Module's page: `}<inlineCode parentName=\"li\">{`my_page.xml`}</inlineCode></li>\n      <li parentName=\"ul\">{`top-level UI Component (form or listing) configuration: `}<inlineCode parentName=\"li\">{`my_form.xml`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`.php`}</inlineCode>{` modifiers that are specific to the module`}</li>\n    </ul>\n    <p>{`Keep in mind that the Magento_UI module contains these important files:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`A general, module-agnostic form definition in the `}<inlineCode parentName=\"li\">{`<form>`}</inlineCode>{` node of the `}<inlineCode parentName=\"li\">{`.xml`}</inlineCode>{` definition file: `}<inlineCode parentName=\"li\">{`<Magento_Ui_module_dir>/view/base/ui_component/etc/definition.xml`}</inlineCode></li>\n      <li parentName=\"ul\">{`Default `}<inlineCode parentName=\"li\">{`.xhtml`}</inlineCode>{` template for the form, which is referenced in `}<inlineCode parentName=\"li\">{`definition.xml`}</inlineCode>{`: `}<inlineCode parentName=\"li\">{`<Magento_Ui_module_dir>/view/base/ui_component/templates/form/default.xhtml`}</inlineCode></li>\n      <li parentName=\"ul\">{`The Form class, which is referenced in `}<inlineCode parentName=\"li\">{`definition.xml`}</inlineCode>{`: `}<inlineCode parentName=\"li\">{`<Magento_Ui_module_dir>/view/base/web/js/form/form.js`}</inlineCode></li>\n    </ul>\n    <p>{`When the request for my_page comes, the server does the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Determines which UI components are used in this particular layout. In the example, the UI components that are used are defined in the `}<inlineCode parentName=\"li\">{`my_form`}</inlineCode>{` component's `}<inlineCode parentName=\"li\">{`.xml`}</inlineCode>{` declaration file.`}</li>\n      <li parentName=\"ol\">{`Searches the `}<inlineCode parentName=\"li\">{`.xml`}</inlineCode>{` files with name `}<inlineCode parentName=\"li\">{`my_form`}</inlineCode>{` among all modules. The server then merges all the `}<inlineCode parentName=\"li\">{`my_form.xml`}</inlineCode>{` file(s) into a single configuration object, thus overriding the common properties, so that the latest `}<inlineCode parentName=\"li\">{`my_form.xml`}</inlineCode>{` file always has the highest priority.`}</li>\n      <li parentName=\"ol\">{`Merges the resulting configuration (from Step 2 above) with the configuration from the UI module `}<inlineCode parentName=\"li\">{`definition.xml`}</inlineCode>{`. The UI module `}<inlineCode parentName=\"li\">{`definition.xml`}</inlineCode>{` configuration file has the lowest priority, and is overwritten by the merged configuration of all `}<inlineCode parentName=\"li\">{`my_form.xml`}</inlineCode>{` files.`}</li>\n      <li parentName=\"ol\">{`Translates the resulting configuration into JSON format and adds it to response body the following way:`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<script type=\"text/x-magento-init\">{\"*\": {\"Magento_Ui/js/core/app\":{<JSON_configuration>}}}</script>\n`}</code></pre>\n    <p>{`Now it is the client's turn to process this JSON and generate the UI component's instances. The flow is following:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`RequireJS requires `}<inlineCode parentName=\"li\">{`Magento_Ui/js/core/app`}</inlineCode>{` and passes `}<a parentName=\"li\" {...{\n          \"href\": \"../../javascript/init.md#declarative-notation\"\n        }}>{`JSON configuration`}</a>{` as a parameter.`}</li>\n      <li parentName=\"ol\">{`The `}<inlineCode parentName=\"li\">{`Magento_Ui/js/core/app`}</inlineCode>{` calls `}<inlineCode parentName=\"li\">{`layout.js`}</inlineCode>{` and passes the UI component's configuration into the layout: `}<inlineCode parentName=\"li\">{`<Magento_Ui_module_dir>/view/base/web/js/core/renderer/layout.js`}</inlineCode>{`.`}</li>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`layout.js`}</inlineCode>{` creates instances of UI components. That means that each UI component's configuration must have an explicitly declared the `}<inlineCode parentName=\"li\">{`component`}</inlineCode>{` property in JSON. This property references the `}<inlineCode parentName=\"li\">{`.js`}</inlineCode>{` file. For example, our form has the component declared in JSON like this: `}<inlineCode parentName=\"li\">{`\"my_form\":{\"component\":\"Magento_Ui/js/form/form\"}`}</inlineCode>{`. So the instance of this class is created, and properties from the JSON overwrites the properties from the UI component's `}<inlineCode parentName=\"li\">{`defaults`}</inlineCode>{` property. Then resulting properties become the first-level properties of the newly created UI component's instance, and the original `}<inlineCode parentName=\"li\">{`defaults`}</inlineCode>{` property is deleted.`}</li>\n      <li parentName=\"ol\">{`The UI components' `}<inlineCode parentName=\"li\">{`.html`}</inlineCode>{` templates (if there are any) are rendered by `}<inlineCode parentName=\"li\">{`knockout.js`}</inlineCode>{` template engine. This means, that `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Ui/view/base/web/js/lib/knockout/bootstrap.js\"\n        }}>{`bootstrap.js`}</a>{` (required by `}<inlineCode parentName=\"li\">{`app.js`}</inlineCode>{`) passes our own `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Ui/view/base/web/js/lib/knockout/template/engine.js\"\n        }}>{`template engine`}</a>{` for the Knockout.`}</li>\n      <li parentName=\"ol\">{`The `}<inlineCode parentName=\"li\">{`bootstrap.js`}</inlineCode>{` binds the component as a Model behind this View (template) using Knockout bindings. The UI components are now displayed on the page, and are fully interactive.`}</li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}